<!DOCTYPE html>
<html lang="zh-CN">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>å¤§å¸çš„é»˜å¥‘åº¦é—®ç­”ğŸ¥µ</title>
Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --google-blue: #4285f4;
Â  Â  Â  Â  Â  Â  --google-red: #ea4335;
Â  Â  Â  Â  Â  Â  --google-yellow: #fbbc05;
Â  Â  Â  Â  Â  Â  --google-green: #34a853;
Â  Â  Â  Â  Â  Â  --gray-bg: #f8f9fa;
Â  Â  Â  Â  }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  background-color: var(--gray-bg);
Â  Â  Â  Â  Â  Â  color: #202124;
Â  Â  Â  Â  Â  Â  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
Â  Â  Â  Â  Â  Â  margin: 0; padding-bottom: 50px;
Â  Â  Â  Â  Â  Â  display: flex; flex-direction: column; align-items: center; min-height: 100vh;
Â  Â  Â  Â  }

Â  Â  Â  Â  .rainbow-bar {
Â  Â  Â  Â  Â  Â  height: 5px; width: 100%;
Â  Â  Â  Â  Â  Â  background: linear-gradient(to right, var(--google-blue) 25%, var(--google-red) 25% 50%, var(--google-yellow) 50% 75%, var(--google-green) 75%);
Â  Â  Â  Â  Â  Â  position: fixed; top: 0; left: 0; z-index: 100;
Â  Â  Â  Â  }

Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  max-width: 650px; width: 92%; background: white;
Â  Â  Â  Â  Â  Â  margin-top: 60px; padding: 35px; border-radius: 12px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 1px 3px rgba(0,0,0,0.1), 0 10px 20px rgba(0,0,0,0.05);
Â  Â  Â  Â  }

Â  Â  Â  Â  h1 { font-size: 24px; font-weight: 400; text-align: center; margin-bottom: 30px; color: #3c4043; }

Â  Â  Â  Â  .input-field {
Â  Â  Â  Â  Â  Â  border: 1px solid #dadce0; border-radius: 8px; padding: 14px 18px;
Â  Â  Â  Â  Â  Â  font-size: 16px; width: 100%; box-sizing: border-box; margin-bottom: 20px; outline: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  .input-field:focus { border: 2px solid var(--google-blue); }

Â  Â  Â  Â  .btn-group { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }

Â  Â  Â  Â  .btn {
Â  Â  Â  Â  Â  Â  border: none; padding: 12px 28px; font-size: 15px; border-radius: 24px;
Â  Â  Â  Â  Â  Â  cursor: pointer; transition: 0.3s; font-weight: 500;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-blue { background: var(--google-blue); color: white; }
Â  Â  Â  Â  .btn-outline { background: white; border: 1px solid #dadce0; color: #5f6368; }
Â  Â  Â  Â  .btn:hover { box-shadow: 0 4px 8px rgba(0,0,0,0.1); transform: translateY(-1px); }
Â  Â  Â  Â  .btn:disabled { background: #ccc; cursor: not-allowed; }

Â  Â  Â  Â  .question-card {
Â  Â  Â  Â  Â  Â  border: 1px solid #dadce0; border-radius: 8px; padding: 22px; margin-bottom: 18px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .question-text { font-size: 17px; font-weight: 500; margin-bottom: 15px; color: #202124; }
Â  Â  Â  Â  .options label {
Â  Â  Â  Â  Â  Â  display: block; margin: 12px 0; cursor: pointer; padding: 10px; border-radius: 6px; border: 1px solid transparent; transition: 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .options label:hover { background: #f8f9fa; border-color: #eee; }
Â  Â  Â  Â  .options input { margin-right: 12px; transform: scale(1.2); }

Â  Â  Â  Â  #result { display: none; text-align: center; }
Â  Â  Â  Â  .score-circle {
Â  Â  Â  Â  Â  Â  width: 140px; height: 140px; border: 12px solid #eee; border-radius: 50%;
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: center;
Â  Â  Â  Â  Â  Â  font-size: 32px; font-weight: bold; margin: 30px auto; transition: 0.8s;
Â  Â  Â  Â  }

Â  Â  Â  Â  .email-box { margin-top: 30px; padding: 20px; background: #f1f3f4; border-radius: 8px; }
Â  Â  Â  Â  .rank-section { margin-top: 30px; padding: 20px; background: #f1f3f4; border-radius: 8px; }
Â  Â  Â  Â  .hidden { display: none; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .rank-btn-container {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

<div class="rainbow-bar"></div>

<div class="container">
Â  Â  <h1 id="top-title"> å¤§å¸çš„é»˜å¥‘åº¦é—®ç­”ğŸ¥µ </h1>

Â  Â  <div id="auth-section">
Â  Â  Â  Â  <input type="text" id="user-id" class="input-field" placeholder="è¾“å…¥ ID ä»¥å¼€å§‹..." onkeydown="if(event.key==='Enter')startQuiz('full')">
Â  Â  Â  Â  <div class="btn-group">
Â  Â  Â  Â  Â  Â  <button class="btn btn-outline" onclick="startQuiz('brief')">ç®€ç•¥ç‰ˆ (20é¢˜)</button>
Â  Â  Â  Â  Â  Â  <button class="btn btn-blue" onclick="startQuiz('full')">å®Œæ•´ç‰ˆ (40é¢˜)</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="rank-btn-container">
Â  Â  Â  Â  Â  Â  <button class="btn btn-outline" onclick="showRankingDirectly()">æŸ¥çœ‹æ’è¡Œæ¦œ</button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="quiz-section" class="hidden">
Â  Â  Â  Â  <form id="quiz-form">
Â  Â  Â  Â  Â  Â  <div id="questions-container"></div>
Â  Â  Â  Â  Â  Â  <button type="button" class="btn btn-blue" style="width:100%; margin-top:20px;" onclick="calculateScore()">æäº¤æˆ‘çš„ç­”æ¡ˆ</button>
Â  Â  Â  Â  </form>
Â  Â  </div>

Â  Â  <div id="result">
Â  Â  Â  Â  <h2 id="result-title"> ä½ è·Ÿå¤§å¸çš„ç›¸ä¼¼åº¦å¤§æ¦‚æœ‰è¿™ä¹ˆå¤š... </h2>
Â  Â  Â  Â  <div class="score-circle" id="score-display">0%</div>
Â  Â  Â  Â  <p id="result-text" style="font-size: 18px; color: #3c4043; line-height: 1.6; padding: 0 10px;"></p>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="rank-section">
Â  Â  Â  Â  Â  Â  <h3>ğŸ† å®æ—¶åˆ†æ•°æ’è¡Œæ¦œ</h3>
Â  Â  Â  Â  Â  Â  <inputÂ 
Â  Â  Â  Â  Â  Â  Â  Â  type="text"Â 
Â  Â  Â  Â  Â  Â  Â  Â  id="rank-user-id"Â 
Â  Â  Â  Â  Â  Â  Â  Â  placeholder="è¾“å…¥ä½ çš„IDï¼Œå°†åˆ†æ•°ä¸Šæ¦œ"
Â  Â  Â  Â  Â  Â  Â  Â  style="padding: 8px; width: 200px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px;"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  <button id="submit-rank-btn" class="btn btn-blue" style="margin-bottom: 15px;" onclick="submitToRanking()">åˆ†æ•°ä¸Šæ¦œ</button>
Â  Â  Â  Â  Â  Â  <div id="rank_list">æ­£åœ¨åŠ è½½æ’è¡Œæ¦œ...</div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="email-box">
Â  Â  Â  Â  Â  Â  <p style="font-size: 14px; margin-bottom: 10px;">è¦å‘é€å›ç­”è®°å½•åˆ°è‡ªå·±çš„é‚®ç®±å—ï¼Ÿ</p>
Â  Â  Â  Â  Â  Â  <input type="email" id="user-email" class="input-field" placeholder="è¾“å…¥ä½ çš„é‚®ç®±...">
Â  Â  Â  Â  Â  Â  <button class="btn btn-blue" onclick="alert('éª—ä½ çš„å…¶å®æˆ‘æ²¡é…æœåŠ¡å™¨')">å‘é€ç»“æœ</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <button class="btn btn-outline" style="margin-top: 25px;" onclick="location.reload()">é‡æ–°æµ‹è¯•</button>
Â  Â  </div>
</div>

<script>Â 
Â  Â  // æ§åˆ¶å°è¾“å…¥yoursï¼ˆï¼‰æŸ¥çœ‹æˆ‘çš„ç­”æ¡ˆ
Â  Â  const API_BASE = "https://quiz-backend-1-lrmy.onrender.com";

Â  Â  const qData = [
Â  Â  Â  Â  { id: "q1", q: "å¥¥åˆ©å¥¥è¿˜æ˜¯è¶£å¤šå¤šï¼Ÿ", opts: ["å¥¥åˆ©å¥¥", "è¶£å¤šå¤š"], a: "6Laj5aSa5aSa" },
Â  Â  Â  Â  { id: "q2", q: "ç©¿ä¸‰è§’è¿˜æ˜¯å¹³è§’ï¼Ÿ", opts: ["ä¸‰è§’", "å¹³è§’"], a: "5LiJ6KeS" },
Â  Â  Â  Â  { id: "q3", q: "Gemini è¿˜æ˜¯ DeepSeekï¼Ÿ", opts: ["Gemini", "DeepSeek"], a: "R2VtaW5p" },
Â  Â  Â  Â  { id: "q4", q: "å–œæ¬¢çŒ«è¿˜æ˜¯ç‹—ï¼Ÿ", opts: ["çŒ«", "ç‹—"], a: "54uX" },
Â  Â  Â  Â  { id: "q5", q: "å†¬å¤©è¿˜æ˜¯å¤å¤©ï¼Ÿ", opts: ["å†¬å¤©", "å¤å¤©"], a: "5aSP5aSp" },
Â  Â  Â  Â  { id: "q6", q: "è–¯æ¡è˜¸ç•ªèŒ„é…±å—ï¼Ÿ", opts: ["ä¼š", "ä¸ä¼š"], a: "5Lya" },Â 
Â  Â  Â  Â  { id: "q7", q: "å‡ºé—¨å¸¦ä¸å¸¦å……ç”µå®ï¼Ÿ", opts: ["å¸¦", "ä¸å¸¦"], a: "5bim" },
Â  Â  Â  Â  { id: "q8", q: "èƒŒåŒ…é‡Œä¼šä¸ä¼šå¤‡æœ‰è¯•çº¸ï¼Ÿ", opts: ["ä¼š", "ä¸ä¼š"], a: "5Lya" },
Â  Â  Â  Â  { id: "q9", q: "æ—©ç¡æ—©èµ·è¿˜æ˜¯ç»å¸¸ç†¬å¤œï¼Ÿ", opts: ["æ—©ç¡æ—©èµ·", "ç»å¸¸ç†¬å¤œ"], a: "5pep552h5pep6LW3" },
Â  Â  Â  Â  { id: "q10", q: "æ— çº¸åŒ–å­¦ä¹ ï¼Ÿ", opts: ["æ˜¯", "å¦"], a: "5ZCm" },
Â  Â  Â  Â  { id: "q11", q: "ç§’å›æ¶ˆæ¯è¿˜æ˜¯å‡†å¤‡å¥½å†å›ï¼Ÿ", opts: ["ç§’å›", "å‡†å¤‡å¥½"], a: "5YeG5aSH5aW9" },
Â  Â  Â  Â  { id: "q12", q: "å–œæ¬¢çœ‹æ—¥å‡ºè¿˜æ˜¯æ—¥è½ï¼Ÿ", opts: ["æ—¥å‡º", "æ—¥è½"], a: "5pel5Ye6" },
Â  Â  Â  Â  { id: "q13", q: "Lady Gaga è¿˜æ˜¯ Taylor Swiftï¼Ÿ", opts: ["Lady Gaga", "Taylor Swift"], a: "TGFkeSBHYWdh" },
Â  Â  Â  Â  { id: "q14", q: "åº“è¿ªè¿˜æ˜¯ç‘å¹¸ï¼Ÿ", opts: ["åº“è¿ª", "ç‘å¹¸"], a: "5bqT6L+q" },
Â  Â  Â  Â  { id: "q15", q: "åƒä¸åƒé¦™èœï¼Ÿ", opts: ["åƒ", "ä¸åƒ"], a: "5ZCD" },
Â  Â  Â  Â  { id: "q16", q: "å–œæ¬¢æ‹é£æ™¯è¿˜æ˜¯äººåƒï¼Ÿ", opts: ["é£æ™¯", "äººåƒ"], a: "5Lq65YOP" },
Â  Â  Â  Â  { id: "q17", q: "æ—…è¡Œæå‰è®¡åˆ’è¿˜æ˜¯éšæ—¶å‡ºå‘ï¼Ÿ", opts: ["æå‰è®¡åˆ’", "éšæ—¶å‡ºå‘"], a: "5o+Q5YmN6K6h5YiS" },
Â  Â  Â  Â  { id: "q18", q: "æ‰‹æœºå¸¦å£³å—ï¼Ÿ", opts: ["å¸¦", "ä¸å¸¦"], a: "5bim" },
Â  Â  Â  Â  { id: "q19", q: "æ‰‹å†²å’–å•¡è¿˜æ˜¯æ„å¼ï¼Ÿ", opts: ["æ‰‹å†²", "æ„å¼"], a: "5oSP5byP" },
Â  Â  Â  Â  { id: "q20", q: "EDM è¿˜æ˜¯ Jazzï¼Ÿ", opts: ["EDM", "Jazz"], a: "RURN" },
Â  Â  Â  Â  { id: "q21", q: "æŠ’æƒ…æµè¡Œè¿˜æ˜¯æ‘‡æ»šï¼Ÿ", opts: ["æµè¡Œ", "æ‘‡æ»š"], a: "5rWB6KGM" },
Â  Â  Â  Â  { id: "q22", q: "è€å…‹è¿˜æ˜¯å®‰å¾·ç›ï¼Ÿ", opts: ["è€å…‹", "å®‰å¾·ç›"], a: "5a6J5b63546b" },
Â  Â  Â  Â  { id: "q23", q: "ç ´äº§å§å¦¹orç»å‘½æ¯’å¸ˆï¼Ÿ", opts: ["ç ´äº§å§å¦¹", "ç»å‘½æ¯’å¸ˆ"], a: "56C05Lqn5aeQ5aa5" },Â 
Â  Â  Â  Â  { id: "q24", q: "é»‘è‰²è¿˜æ˜¯ç™½è‰²ï¼Ÿ", opts: ["é»‘è‰²", "ç™½è‰²"], a: "6buR6Imy" },Â 
Â  Â  Â  Â  { id: "q25", q: "è°ˆè¿‡å¥³æœ‹å‹å—ï¼Ÿ", opts: ["æœ‰", "å¦"], a: "5ZCm" },
Â  Â  Â  Â  { id: "q26", q: "æ—…è¡Œæ›´åœ¨æ„åƒè¿˜æ˜¯ä½ï¼Ÿ", opts: ["åƒ", "ä½"], a: "5ZCD" },
Â  Â  Â  Â  { id: "q27", q: "é™ˆå¥•è¿…è¿˜æ˜¯å«å…°ï¼Ÿ", opts: ["é™ˆå¥•è¿…", "å«å…°"], a: "5Y2r5YWw" },
Â  Â  Â  Â  { id: "q28", q: "ä»¥åè¿˜æœ‰å¯èƒ½å…»å® ç‰©å—ï¼Ÿ", opts: ["ä¼š", "ä¸ä¼š"], a: "5Lya" },
Â  Â  Â  Â  { id: "q29", q: "ç›¸ä¿¡ç¥ç§˜å­¦å—ï¼Ÿ", opts: ["ç›¸ä¿¡", "ä¸ç›¸ä¿¡"], a: "55u45L+h" },
Â  Â  Â  Â  { id: "q30", q: "ç›¸ä¿¡é£æ°´å­¦å—ï¼Ÿ", opts: ["ç›¸ä¿¡", "ä¸ç›¸ä¿¡"], a: "55u45L+h" },
Â  Â  Â  Â  { id: "q31", q: "ä¼šä»¥äº¤å‹ä¸ºä¸»è¦ç›®çš„è€Œæ—…è¡Œå—ï¼Ÿ", opts: ["ä¼š", "ä¸ä¼š"], a: "5Lya" },
Â  Â  Â  Â  { id: "q32", q: "æ—…è¡Œæ›´å–œæ¬¢Soloè¿˜æ˜¯ç»„é˜Ÿï¼Ÿ", opts: ["Solo", "ç»„é˜Ÿ"], a: "U29sbw==" },
Â  Â  Â  Â  { id: "q33", q: "èµ·é£æ—¶æ›´å€¾å‘ X è¿˜æ˜¯ç”µæŠ¥ï¼Ÿ", opts: ["X", "ç”µæŠ¥"], a: "WA==" },
Â  Â  Â  Â  { id: "q34", q: "æ”¯æŒè€ƒç ”è¿˜æ˜¯è€ƒå…¬ï¼Ÿ", opts: ["è€ƒç ”", "è€ƒå…¬"], a: "6ICD56CU" },
Â  Â  Â  Â  { id: "q35", q: "æ”¯æŒåŠ¨ä¿ï¼Ÿ", opts: ["æ”¯æŒ", "ä¸æ”¯æŒ"], a: "5pSv5oyB" },
Â  Â  Â  Â  { id: "q36", q: "æ‹ç‰©ç™–ï¼Ÿ", opts: ["æœ‰", "æ²¡æœ‰"], a: "5pyJ" },
Â  Â  Â  Â  { id: "q37", q: "ä½ è§‰å¾—30å²åœ¨äººç”Ÿä¸­ç®—æ—©å—ï¼Ÿ", opts: ["æ—©", "ä¸æ—©"], a: "5pep" },
Â  Â  Â  Â  { id: "q38", q: "ä½ å·²ç»æµç‹¬ç«‹äº†å—ï¼Ÿ", opts: ["å·²ç‹¬ç«‹", "æš‚æœª"], a: "5pqC5pyq" },
Â  Â  Â  Â  { id: "q39", q: "ä½ å±äºé«˜æ•æ„Ÿäººç¾¤å—ï¼Ÿ", opts: ["æ˜¯", "å¦"], a: "5piv" },
Â  Â  Â  Â  { id: "q40", q: "å¯¹ç¤¾ä¼šå­¦ï¼Œå¿ƒç†å­¦æˆ–è¯­è¨€å­¦æ„Ÿå…´è¶£å—ï¼Ÿ", opts: ["æ˜¯", "å¦"], a: "5piv" }
Â  Â  ];

Â  Â  let currentSet = [];
Â  Â  let finalScore = 0;Â 

Â  Â  window.onload = function() {
Â  Â  Â  Â  const savedUserId = localStorage.getItem('quiz_user_id');
Â  Â  Â  Â  if (savedUserId) {
Â  Â  Â  Â  Â  Â  document.getElementById('user-id').value = savedUserId;
Â  Â  Â  Â  }
Â  Â  Â  Â  loadRanking();
Â  Â  };

Â  Â  function safeAtob(str) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  return decodeURIComponent(escape(window.atob(str))).trim();Â 
Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  return window.atob(str).trim();
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function startQuiz(mode) {
Â  Â  Â  Â  const id = document.getElementById('user-id').value;
Â  Â  Â  Â  if (!id.trim()) {Â 
Â  Â  Â  Â  Â  Â  alert("å¿…é¡»è¾“å…¥ ID æ‰èƒ½å¼€å§‹å“¦");Â 
Â  Â  Â  Â  Â  Â  return;Â 
Â  Â  Â  Â  }
Â  Â  Â  Â  localStorage.setItem('quiz_user_id', id);
Â  Â  Â  Â Â 
Â  Â  Â  Â  document.getElementById('top-title').innerText = "åŠ è½½ä¸­...";
Â  Â  Â  Â  document.getElementById('auth-section').classList.add('hidden');
Â  Â  Â  Â  document.getElementById('quiz-section').classList.remove('hidden');

Â  Â  Â  Â  let shuffled = [...qData].sort(() => Math.random() - 0.5);
Â  Â  Â  Â  currentSet = mode === 'brief' ? shuffled.slice(0, 20) : shuffled;
Â  Â  Â  Â  renderQuestions();
Â  Â  }

Â  Â  function renderQuestions() {
Â  Â  Â  Â  const container = document.getElementById('questions-container');
Â  Â  Â  Â  container.innerHTML = "";
Â  Â  Â  Â  currentSet.forEach((item, i) => {
Â  Â  Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  Â  Â  card.className = 'question-card';
Â  Â  Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="question-text">${i+1}. ${item.q}</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="options">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${item.opts.map(o => `<label><input type="radio" name="${item.id}" value="${o.trim()}"> ${o}</label>`).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  container.appendChild(card);
Â  Â  Â  Â  });
Â  Â  Â  Â  window.scrollTo(0, 0);
Â  Â  Â  Â  document.getElementById('top-title').innerText = "å¤§å¸çš„é»˜å¥‘åº¦é—®ç­”ğŸ¥µ";
Â  Â  }

Â  Â  function calculateScore() {
Â  Â  Â  Â  let scoreCount = 0;
Â  Â  Â  Â  let answeredCount = 0;
Â  Â  Â  Â Â 
Â  Â  Â  Â  currentSet.forEach(item => {
Â  Â  Â  Â  Â  Â  const sel = document.querySelector(`input[name="${item.id}"]:checked`);
Â  Â  Â  Â  Â  Â  if (sel) {
Â  Â  Â  Â  Â  Â  Â  Â  answeredCount++;
Â  Â  Â  Â  Â  Â  Â  Â  if (sel.value === safeAtob(item.a)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scoreCount++;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  if (answeredCount < currentSet.length) {Â 
Â  Â  Â  Â  Â  Â  alert(`è¿˜æœ‰ ${currentSet.length - answeredCount} é“é¢˜æ²¡å†™å®Œï¼Œä¸å‡†è·‘ï¼`);Â 
Â  Â  Â  Â  Â  Â  return;Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  finalScore = Math.round((scoreCount / currentSet.length) * 100);
Â  Â  Â  Â  showResult(finalScore);
Â  Â  }

Â  Â  function showResult(s) {
Â  Â  Â  Â  document.getElementById('quiz-section').classList.add('hidden');
Â  Â  Â  Â  document.getElementById('result').style.display = 'block';
Â  Â  Â  Â Â 
Â  Â  Â  Â  const circle = document.getElementById('score-display');
Â  Â  Â  Â  const text = document.getElementById('result-text');
Â  Â  Â  Â  const userId = document.getElementById('user-id').value;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // å…³é”®ä¿®æ­£ï¼šè‡ªåŠ¨åŒæ­¥ ID åˆ°æ’è¡Œæ¦œè¾“å…¥æ¡†
Â  Â  Â  Â  document.getElementById('rank-user-id').value = userId;
Â  Â  Â  Â Â 
Â  Â  Â  Â  circle.innerText = s + "%";
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (s >= 80) {
Â  Â  Â  Â  Â  Â  circle.style.borderColor = "var(--google-blue)"; circle.style.color = "var(--google-blue)";
Â  Â  Â  Â  Â  Â  text.innerText = `${userId}ï¼Œæˆ‘ä»¬æ˜¯å¤©é€ åœ°è®¾çš„å§å¦¹ã€‚`;
Â  Â  Â  Â  } else if (s >= 60) {
Â  Â  Â  Â  Â  Â  circle.style.borderColor = "var(--google-green)"; circle.style.color = "var(--google-green)";
Â  Â  Â  Â  Â  Â  text.innerText = `${userId}ï¼Œæˆ–è®¸æˆ‘æœ‰è·Ÿä½ èŠè¿‡æˆ‘çš„æ€§ç™–å¥½ã€‚å½“ç„¶ï¼Œä½ ç°åœ¨ä¹Ÿèƒ½é—®ã€‚`;
Â  Â  Â  Â  } else if (s >= 35) {
Â  Â  Â  Â  Â  Â  circle.style.borderColor = "var(--google-yellow)"; circle.style.color = "var(--google-yellow)";
Â  Â  Â  Â  Â  Â  text.innerText = `${userId}ï¼Œæˆ‘ä»¬å¯èƒ½æœ‰äº›ä¸åŒçˆ±å¥½ã€‚å¦‚æœä½ æœ‰å…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥èŠèŠã€‚`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  circle.style.borderColor = "var(--google-red)"; circle.style.color = "var(--google-red)";
Â  Â  Â  Â  Â  Â  text.innerText = `${userId}ï¼Œä½ æœ‰å¾ˆå¤šè§è§£ä¸æˆ‘ä¸å°½ç›¸åŒã€‚è¿™å¾ˆæœ‰æ„æ€ã€‚`;
Â  Â  Â  Â  }

Â  Â  Â  Â  loadRanking();
Â  Â  }

Â  Â  function showRankingDirectly() {
Â  Â  Â  Â  document.getElementById('auth-section').classList.add('hidden');
Â  Â  Â  Â  document.getElementById('result').style.display = 'block';
Â  Â  Â  Â  document.getElementById('result-title').innerText = "å®æ—¶åˆ†æ•°æ’è¡Œæ¦œ";
Â  Â  Â  Â  document.getElementById('score-display').innerText = "ğŸ†";
Â  Â  Â  Â  document.getElementById('score-display').style.borderColor = "var(--google-yellow)";
Â  Â  Â  Â  document.getElementById('score-display').style.color = "var(--google-yellow)";
Â  Â  Â  Â  document.getElementById('result-text').innerText = "come on";
Â  Â  Â  Â  loadRanking();
Â  Â  }

Â  Â  function submitToRanking() {
Â  Â  Â  Â  const rankUserId = document.getElementById('rank-user-id').value;
Â  Â  Â  Â  const btn = document.getElementById('submit-rank-btn');

Â  Â  Â  Â  if (!rankUserId) {
Â  Â  Â  Â  Â  Â  alert("è¯·è¾“å…¥IDå†ä¸Šæ¦œï¼");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  btn.disabled = true;
Â  Â  Â  Â  btn.innerText = "æäº¤ä¸­...";

Â  Â  Â  Â  fetch(`${API_BASE}/submit`, {
Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  body: JSON.stringify({ user_id: rankUserId, score: finalScore })
Â  Â  Â  Â  }).then(response => {
Â  Â  Â  Â  Â  Â  if (!response.ok) throw new Error(`HTTPé”™è¯¯ï¼š${response.status}`);
Â  Â  Â  Â  Â  Â  return response.json();
Â  Â  Â  Â  }).then(data => {
Â  Â  Â  Â  Â  Â  if (data.success) {
Â  Â  Â  Â  Â  Â  Â  Â  alert("åˆ†æ•°ä¸Šæ¦œæˆåŠŸï¼");
Â  Â  Â  Â  Â  Â  Â  Â  loadRanking();
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  alert("åˆ†æ•°ä¸Šæ¦œå¤±è´¥ï¼š" + (data.error || "æœªçŸ¥é”™è¯¯"));
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }).catch(err => {
Â  Â  Â  Â  Â  Â  console.error("æ’è¡Œæ¦œæäº¤å¤±è´¥ï¼š", err);
Â  Â  Â  Â  Â  Â  alert("åˆ†æ•°ä¸Šæ¦œå¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åå†è¯•ï½");
Â  Â  Â  Â  }).finally(() => {
Â  Â  Â  Â  Â  Â  btn.disabled = false;
Â  Â  Â  Â  Â  Â  btn.innerText = "åˆ†æ•°ä¸Šæ¦œ";
Â  Â  Â  Â  });
Â  Â  }

Â  Â  function loadRanking() {
Â  Â  Â  Â  fetch(`${API_BASE}/ranking`)
Â  Â  Â  Â  Â  Â  .then(res => {
Â  Â  Â  Â  Â  Â  Â  Â  if (!res.ok) throw new Error(`æ¥å£é”™è¯¯ï¼š${res.status}`);
Â  Â  Â  Â  Â  Â  Â  Â  return res.json();
Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  .then(data => {
Â  Â  Â  Â  Â  Â  Â  Â  let html = '';
Â  Â  Â  Â  Â  Â  Â  Â  if (!Array.isArray(data) || data.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  html = "<p>æš‚æ— ä¸Šæ¦œåˆ†æ•°</p>";
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data.forEach((item, i) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  html += `<p style="margin: 8px 0; border-bottom: 1px dashed #ddd; padding-bottom: 4px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>${i+1}.</strong> ${item.user_id} â€” <span style="color:var(--google-blue)">${item.score}åˆ†</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('rank_list').innerHTML = html;
Â  Â  Â  Â  Â  Â  }).catch(err => {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("æ’è¡Œæ¦œåŠ è½½å¤±è´¥ï¼š", err);
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('rank_list').innerHTML = `<p style="color:red">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢ï½</p>`;
Â  Â  Â  Â  Â  Â  });
Â  Â  }

Â  Â  window.yours = function() {
Â  Â  Â  Â  if (currentSet.length === 0) return "âŒ å°šæœªå¼€å§‹";
Â  Â  Â  Â  currentSet.forEach(item => {
Â  Â  Â  Â  Â  Â  const correctVal = safeAtob(item.a);
Â  Â  Â  Â  Â  Â  const radios = document.querySelectorAll(`input[name="${item.id}"]`);
Â  Â  Â  Â  Â  Â  radios.forEach(r => {
Â  Â  Â  Â  Â  Â  Â  Â  if (r.value.trim() === correctVal) r.checked = true;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });
Â  Â  Â  Â  alert("ğŸ¥µ ä»¥ä¸‹æ˜¯æˆ‘çš„ç­”æ¡ˆã€‚");
Â  Â  Â  Â  return "âœ… Done";
Â  Â  };
</script>
</body>
</html>
